# =======================================
# TESTING
# =======================================
# type Post {
#     id: String!
#     text: String!
#     comments: [Comment] @relation(onDelete: CASCADE)
#     user: User! @role(onCreate: "own", onUpdateDelete: "own")
# }

# type UserFriend {
#     _id: String!
#     user: User!
#     friend: User!
# }

# type User {
#     phoneNumbers: String
#     image: String
# }

# type Comment {
#     id: String!
#     post: Post!
#     text: String!
#     user: User! @role(onCreate: "own", onUpdateDelete: "own")
# }


# =======================================
# RAJAKARCIS
# =======================================

# ADMIN
type Type {
    name: String!
    tickets: [Ticket] @relation(onDelete: RESTRICT)
}

type Category {
    name: String!
    subCategories: [SubCategory] @relation(onDelete: CASCADE)
    events: [Event]
    categoryImage: CategoryImage @relation(onDelete: CASCADE)
}

type SubCategory {
    category: Category!
    name: String!
    events: [Event]
}

type CategoryImage {
    name: String
    url: String! @File
    category: Category
}

type Bank {
    name: String!
    bankPayments: [BankPayment] @relation(onDelete: RESTRICT)
    # userBanks: [UserBank] @relation(onDelete: RESTRICT)
}

type BankPayment {
    name: String!
    number: String!
    bank: Bank!
    paymentMethod: PaymentMethod!
}

type PaymentMethod {
    name: String!
    bankPayments: [BankPayment]
}

# type UserBank {
#     name: String!
#     number: String!
#     bank: Bank!
#     user: User! @role(onCreate: "own", onDelete: "own")
# }

type Event {
    owner: User! @role(onCreate: "own", onDelete: "own")
    name: String!
    locationType: String @default(value: "tbd")
    locationName: String
    latitude: String
    longitude: String
    address: String
    state: String
    postalCode: String
    city: String
    country: String
    category: Category!
    subCategory: SubCategory!
    startDate: String!
    endDate: String!
    startTime: String!
    endTime: String!
    tickets: [Ticket] @relation(onDelete: CASCADE)
    isShowRemainingTicket: Boolean @default(value: false)
    eventImages: [EventImage] @relation(onDelete: CASCADE)
    description: String!
    organizer: String!
    organizerDescription: String!
    termsAndCondition: String
    refundPolicy: String
    link: String
    isPrivate: Boolean @default(value: false)
}

type EventImage {
    name: String
    url: String! @File
    event: Event
}

type Ticket {
    event: Event!
    type: Type!
    name: String
    qty: Int
    stock: Int
    price: Float
    isIncludeFees: Boolean
    startDate: String
    endDate: String
    startTime: String
    endTime: String
    description: String
    isVisible: Boolean
    orderMinQty: Int
    orderMaxQty: Int
    salesChannel: String
    isSold: Boolean
}

type Order {
    user: User @role(onCreate: "own")
    event: Event!
    ticket: Ticket!
    price: Float
    fee: Float
    qty: Int
    subTotal: Float
    transaction: Transaction
}

type Transaction {
    transactionId: String
    user: User @role(onCreate: "own")
    orders: [Order] @role(onCreate: "own")
    customerFirstName: String
    customerLastName: String
    customerPhoneNumber: String
    customerEmail: String
    attendanceFirstName: String
    attendanceLastName: String
    attendancePhoneNumber: String
    attendanceEmail: String
    attendanceIdentity: String
    total: Float
    isPaid: String @default(value: "")
    bankPayment: BankPayment
    # userAddInformation: UserAddInformation
}

# USER
type User {
    title: String
    phoneNumber: String
    image: String
    address: String
    city: String
    postalCode: String
}

# # type Tag {
# #     id: String
# #     name: String
# # }

# type EventTaxe {
#     id: String
#     event: Event!
#     ticket: Ticket!
#     isUsingTax: Boolean! @default(value: false)
#     taxName: String
#     taxRate: String
# }

# type Payout {
#     id: String
#     user: User!
#     bank: Bank!
#     accountHolder: String!
#     name: String!
#     address1: String!
#     address2: String
#     city: String
#     postalCode: String
#     state: String
#     branch: String!
#     accountNumber: String!
#     accountNickname: String
# }

# type EventReport {
#     id: String
#     event: Event!
#     user: User! @role(onCreate: "own", onUpdateDelete: "own")
#     totalTicketAvailable: Int
#     totalTicketPending: Int
#     totalTicketSold: Int
#     pageViews: Int
#     totalPayoutUnpaid: Int
#     totalPayoutPaid: Int
# }

# type EventSale {
#     id: String
#     event: Event!
#     ticket: Ticket!
#     price: Int
#     firstName: String
#     lastName: String
#     email: String
#     phoneNumber: String
# }

# type UsersTicket {
#     id: String
#     user: User! @role(onCreate: "own", onUpdateDelete: "own")
#     event: Event!
#     ticket: Ticket!
# }

# type UsersInterest {
#     id: String
#     user: User! @role(onCreate: "own", onUpdateDelete: "own")
#     event: Event!
# }

# type UserAddInformation {
#     id: String
#     user: User @role(onCreate: "own", onUpdateDelete: "own")
#     bussiness: Boolean
#     bussinessType: String
#     community: String!
# }

# type Payment {
#     id: String
#     bank: Bank!
#     accountName: String!
#     accountNumber: String!
#     type: String @default(value: "transfer")
# }